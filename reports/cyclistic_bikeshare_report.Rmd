---
title: "Cyclistic bike-share analysis"
author: "Paidraig 'Patrick' O'Ceallaigh"
date: "2024-04-24"
output: 
  html_document:
    css: "../resources/css/style.css"
    df_print: paged
    theme: sandstone
    highlight: tango
    toc: true
    toc_depth: 4
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  fig.align = "center",
  fig.width = 6,
  fig.asp = 0.618
)

library(tidyverse)
library(here)

source(here("R", "01_load_data.R"))
source(here("R", "02_inspect_data.R"))
source(here("R", "03_transform_data.R"))
source(here("R", "04_analyze_data.R"))
source(here("R", "style_tables.R"))
```

## Executive summary    


## Introduction    

In the evolving landscape of urban mobility, bike-share programs have emerged as a cornerstone for convenient and sustainable transportation. Cyclistic, a prominent bike-share company based in Chicago, has carved a niche in this dynamic market since its inception in 2016. Featuring a diverse fleet of over 5,800 bicycles, including specialized models like reclining bikes and hand tricycles, Cyclistic ensures inclusivity and accessibility for a broad user base. The program's infrastructure is robust, with 692 docking stations across Chicago that support geotracking and seamless bike exchanges. While the company's diverse fleet and flexible pricing plans have been instrumental in attracting a wide range of users, the majority of rides are utilized for leisure, with approximately 30% serving commuters.

### Background    

Under the guidance of Lily Moreno, the Director of Marketing, Cyclistic has achieved significant growth through strategic marketing and customer engagement initiatives. Historically, the company's marketing efforts have been geared towards building brand awareness and appealing to a broad consumer base, utilizing channels like email, social media, and direct promotions. Cyclistic offers a range of pricing options from single-ride passes to annual memberships, with the latter being identified as considerably more profitable. This insight has prompted a strategic pivot aimed at increasing the proportion of annual memberships, which are deemed crucial for the company's long-term financial health and market dominance.

Despite the success, Cyclistic's executive team, known for their meticulous attention to detail, requires a data-driven approach to further refine and optimize marketing strategies. This is where the marketing analytics team, including junior data analysts like yourself, plays a pivotal role. Having joined the team six months ago, your objective has been to not only grasp Cyclistic's operational ethos but also to contribute to its mission through rigorous data analysis and actionable insights.

### Objectives    

The primary objective of this analysis is to delineate the usage patterns of annual members versus casual riders. By understanding these differences, the team aims to uncover the underlying factors that influence a rider's decision to opt for casual passes or commit to an annual membership. This investigation will focus on various aspects such as duration of rides, preferred bike types, peak usage times, and the purposes of trips (leisure versus commuting).

The insights derived from this analysis will serve as the foundation for developing targeted marketing strategies aimed at converting casual riders into annual members. This strategic shift is not only expected to enhance customer retention but also to maximize profitability. The upcoming recommendations will need to be backed by compelling data visualizations and insights that can persuade the executive team of their viability and potential impact.

In summary, this analysis is not just about understanding how two segments of riders utilize the Cyclistic program, but about leveraging this understanding to foster a more sustainable growth trajectory through increased membership conversion.

### Research question    

> How do annual members and casual riders use Cyclisitc bikes differently?

## Data collection    

### Data sources   

For the comprehensive analysis of usage patterns between annual members and casual riders, the primary data source comprises the most recent twelve months of historical trip data from Cyclistic's bike-share program. This dataset is publicly accessible and consists of twelve individual files, each representing a month's worth of data, formatted in CSV. These files encapsulate extensive records of all bike trips taken during this period, capturing a variety of attributes related to each trip. The data has been made available under the terms specified in the provided [license](https://divvybikes.com/data-license-agreement) and can be downloaded [here](https://divvy-tripdata.s3.amazonaws.com/index.html).

```{r raw_data, warning=FALSE, message=FALSE, echo=FALSE}
# Load the raw dataset image and float it to the center
htmltools::img(
  src = here("resources", "images", "raw_data.png"),
  align = "center",
  alt = "Cyclistic dataset: 04/2023 - 03/2024",
  style = "width: 60%"
)
```

### Data description  

The raw dataset is structured with each row representing a unique bike trip, characterized by the following variables and their respective types:

```{r raw_dataset_table, warning=FALSE, message=FALSE, echo=FALSE}
# Create a tibble for variable information
variable_name <- c(
  "`ride_id`", "`rideable_type`",
  "`started_at`", "`ended_at`",
  "`start_station_name`", "`start_station_id`",
  "`end_station_name`", "`end_station_id`",
  "`start_lat`", "`start_lng`",
  "`end_lat`", "`end_lng`",
  "`member_casual`"
)

variable_description <- c(
  "A unique id for each bike ride",
  "Type of bicyle used for the ride",
  "Timestamp for the begining of the ride",
  "Timestamp for the end of the ride",
  "Name of the station from which the ride started ",
  "ID of the staion from which the ride started",
  "Name of the station at which the ride ended",
  "ID of the station at which the ride ended",
  "Latitude at which the ride started",
  "Longitude at which the ride started",
  "Latitude at which the ride ended",
  "Longitude at which the ride ended",
  "Type of rider"
)

variable_type <- c(
  "<chr>", "<chr>", "<dttm>", "<dttm>",
  "<chr>", "<chr>", "<chr>", "<chr>", "<dbl>",
  "<dbl>", "<dbl>", "<dbl>", "<chr>"
)

variable_info <- tibble(variable_name, variable_type, variable_description)

variable_info %>%
  kable(
    caption = "Variables",
    col.names = c("Variable", "Type", "Description")
  ) %>%
  custom_table_theme()
```

This detailed and structured dataset provides a solid foundation for analyzing and comparing the different usage patterns of Cyclistic's bike-share system by annual members and casual riders. Through this analysis, the marketing analytics team aims to derive insights that can influence strategic marketing decisions, ultimately converting more casual riders into annual members.

### Challenges and limitations    

While the dataset is rich in information and provides a comprehensive view of bike trips taken over the past year, there are several challenges and limitations that need to be considered:

1. **Data Volume and Processing**
    - **Challenge**: Combining data from 12 CSV files with over 5,000,000 rows can be computationally intensive and time-consuming.  
    - **Mitigation**: Utilize efficient data manipulation packages in R such as `dtplyr` "lazy" data.table for its superior performance with large datasets and `dplyr` for its intuitive syntax and data manipulation capabilities.
2. **Joining and Merging Data**
    - **Challenge**: Merging data from multiple sources into a cohesive dataset requires careful data handling to ensure integrity.
    - **Mitigation**: Use `vroom` for fast reading of CSV files and `dtplyr` and `dplyr` for efficient data manipulation and merging.
3. **Data Cleaning and Preprocessing**
    - **Challenge**: The raw data may contain missing values, outliers, or inconsistencies that need to be addressed before analysis.
    - **Mitigation**: Use R functions (e.g., `dplyr`, `tidyr`) for data cleaning (handling missing values, duplicates, outliers).
4. **Geospatial Operations**
    - **Challenge**: Handling latitude and longitude data introduces specific challenges related to spatial data accuracy and consistency.
        - Calculating distances between coordinates results in distances that are "as the crow flies" and may not reflect actual travel distances.
    - **Mitigation**: Utilize geospatial packages like `geosphere`, sf`, and `leaflet` for geospatial analysis and visualization.
5. **Data Privacy and Ethical Considerations**
    - **Challenge**: Maintaining confidentiality and adhering to ethical data use standards is essential.
    - **Mitigation**: Anonymize sensitive data using R functions before analysis. Ensure all data use complies with ethical standards and legal requirements.
     
## Data cleaning    

### Data inspection  

The data inspection process serves as a preliminary check to ensure the quality and structure of the dataset before proceeding with detailed analysis. This stage is crucial for identifying potential issues that could affect the validity of the study’s conclusions. The following steps were undertaken to inspect the dataset comprehensively:

#### Examine structure of data     

To begin, we examined the overall structure and type of the data contained within the dataset. This was accomplished using the `glimpse()` function from the `dplyr` package, which provides a compact display of the types of each column along with a quick view of the first few entries in each:

```{r}
data_raw %>%
  glimpse()
```


#### Check duplicate observations    

Identifying and eliminating duplicate records is essential to ensure the integrity of the analysis. Given that each record in the dataset contains a unique identifier called `ride_id`, we anticipated minimal duplication. To verify this, the dataset was processed using the `dplyr` package, which is part of the comprehensive tidyverse suite of tools for data manipulation in R. We grouped the data by all columns to account for complete record duplication, filtered out any duplicates, and counted the remaining rows:

```{r duplicate_obs, echo=TRUE, eval=FALSE}
duplicate_obs <- data_raw %>%
  group_by_all() %>%
  filter(n() > 1) %>%
  ungroup() %>%
  nrow_lazy_dt()
```

After this thorough check, no duplicate records were found in the dataset, confirming that each `ride_id` indeed represents a unique trip event. This finding solidifies the dataset’s reliability for subsequent analyses, ensuring that each entry uniquely contributes to the insights generated.


#### Check missing values    

Handling missing data is crucial as it can significantly impact the analysis. To assess and quantify missing values within the dataset, we utilized the `dplyr` and `tidyr` packages from the tidyverse collection, which are robust tools for data manipulation in R. The procedure involved summarizing the missing values across all columns and transforming the results for a clearer presentation:     

```{r missing_values, echo=TRUE, eval=FALSE}
missing_obs <- data_raw %>%
  summarise(across(everything(), ~ sum(is.na(.), na.rm = TRUE))) %>%
  pivot_longer(
    everything(),
    names_to = "variable",
    values_to = "missing_count"
  ) %>%
  filter(missing_count > 0) %>%
  as_tibble()
```

Upon inspection, it was discovered that certain variables related to station identification and location data exhibited notable gaps:

```{r missing_values_table, warning=FALSE, message=FALSE, echo=FALSE}
missing_values <- c(0, 0, 0, 0, 874450, 874450, 929226, 929226, 0, 0, 7566, 7566, 0)

missing_info <- tibble(variable_name, missing_values)

# Display only the variables with missing data
missing_info %>%
  filter(
    missing_values > 0
  ) %>%
  kable(
    caption = "Missing values",
    col.names = c("Variable", "Missing values")
  ) %>%
  custom_table_theme()
```


These findings indicate significant missing data in station identifiers and geolocation details, which could affect spatial analysis and ride linkage accuracy. Such gaps will necessitate careful consideration in subsequent stages of data cleaning and analysis to ensure that conclusions drawn are based on comprehensive and accurate information.

#### Check categorical variables    

Analyzing the consistency and accuracy of categorical variables is essential for ensuring data integrity. In this analysis, the `dplyr` package was employed to count and evaluate the distinct categories present in the `rideable_type` and `member_casual` variables.

##### Rideable_type variable     
The `rideable_type` variable categorizes the types of bikes used in the trips. While only `classic_bike` and `electric_bike` were expected based on company records, an additional category, `docked bike`, was identified, which was not anticipated:

```{r count_rideable_type, echo=TRUE, eval=FALSE}
count_rideable_type <- data_raw %>%
  count_categorical(rideable_type)
```

The presence of `docked bike` raises questions about its meaning, as it could potentially refer to bikes that are either not clearly classified between the two expected types or perhaps represent bikes that have been temporarily removed from active service for maintenance. This ambiguity requires further investigation to accurately interpret the data involving this category.

##### Member_casual variable     

member_casual: For the member_casual variable, which distinguishes between members (annual subscribers) and casual riders (non-subscribers), the results were as expected. Only the two anticipated values, "member" and "casual," were found, confirming the accuracy of data entries for this variable:

```{r count_member_casual, echo=TRUE, eval=FALSE}
count_member_casual <- data_raw %>%
  count_categorical(member_casual)
```

This assessment underscores the importance of validating categorical data against expected outcomes to ensure the reliability of analyses based on these classifications. For the `rideable_type` variable, particularly, the unexpected category will be noted for potential adjustments in the analysis framework or for clarification from data management teams.

### Data transformation     

The data transformation process involves several steps aimed at refining the dataset to enhance the quality and relevance of the analysis. These transformations are crucial for ensuring that the data is clean, properly structured, and ready for detailed analytical tasks. The following transformations were performed on the Cyclistic dataset:

#### Remove unnecessary variables     

Initially, the dataset included variables related to station identification, specifically the names and IDs of start and end stations (start_station_name, start_station_id, end_station_name, end_station_id). These variables comprised the majority of missing data within the dataset, posing potential challenges for complete and accurate analysis. While station identification information could offer valuable insights for future studies, particularly in understanding spatial patterns and usage trends, it was not pertinent to the current analysis's objectives. Consequently, to streamline the dataset and focus on the most relevant variables for examining user behavior and bike usage patterns, these station identification variables were removed:

```{r remove_irrelevant_vars, echo=TRUE, eval=FALSE}
irrelevant_vars <- c(
  "start_station_name",
  "start_station_id",
  "end_station_name",
  "end_station_id"
)

data_processed <- data_raw %>%
  select(-all_of(irrelevant_vars))
```

This step not only reduced the complexity of the data but also minimized the impact of the missing data on the overall analysis, ensuring a more focused and efficient analytical process.

#### Remove missing values

The presence of missing values can hinder the accuracy and reliability of the analysis. To address this issue, the dataset was filtered to exclude rows with missing values in the latitude and longitude columns for both the start and end stations. This step was crucial for ensuring the integrity of geospatial analyses and visualizations that rely on accurate location data:     

```{r remove_missing_values, echo=TRUE, eval=FALSE}
data_processed <- data_processed %>%
  filter(
    !is.na(end_lat),
    !is.na(end_lng)
  )
```


#### Remove invalid categories

During the initial data inspection phase, it was noted that all categorical variables conformed to expected categories except for one unexpected entry in the rideable_type variable. The rideable_type included an unforeseen category labeled "docked bike," which was not anticipated based on the operational definitions provided for the dataset. This category's presence raised questions about its definition, as it could potentially represent a classification error, bikes taken out of active circulation for maintenance, or another unspecified category.

Given the uncertainty surrounding the "docked bike" category and its deviation from the expected "classic bike" and "electric bike" categories, a decision was made to exclude this category from the current analysis. This approach ensures that the analysis remains focused on well-defined and understood categories, thus maintaining the integrity of the analytical outcomes:

```{r remove_invalid_categories, echo=TRUE, eval=FALSE}
data_processed <- data_processed %>%
  filter(!rideable_type %in% "docked_bike")
```

This exclusion is a critical step in refining the dataset, ensuring that subsequent analyses are based on reliable and valid categorical data, and aligns with the predefined scope of the study.

#### Convert data types

In R, particularly within the tidyverse, it's crucial to ensure that categorical variables are correctly typed as factors. This conversion facilitates efficient handling of categorical data in functions used for statistical modeling and plotting. Factors help define a set of unique values that R recognizes, optimizing both memory use and processing.

Converting rideable_type and member_casual from characters to factors ensures that these variables are appropriately processed during analysis, preventing potential errors and improving performance:

```{r convert_data_types, echo=TRUE, eval=FALSE}
data_processed <- data_processed %>%
  mutate(
    rideable_type = as.factor(rideable_type),
    member_casual = as.factor(member_casual)
  )
```

This conversion is part of the data preprocessing to prepare the dataset for more complex analytical tasks, ensuring that the data adheres to the best practices for data analysis in R.

#### Rename variables

To improve readability and consistency within the dataset, variable names were standardized:    

```{r rename_variables, echo=TRUE, eval=FALSE}
data_processed <- data_processed %>%
  rename(
    bike_type = rideable_type,
    rider_type = member_casual,
    start_timestamp = started_at,
    end_timestamp = ended_at,
    start_latitude = start_lat,
    start_longitude = start_lng,
    end_latitude = end_lat,
    end_longitude = end_lng
  )
```

Standardizing variable names enhances clarity and coherence within the dataset, making it easier to interpret and analyze the data effectively. This step is essential for maintaining consistency and ensuring that all variables are clearly labeled and identifiable throughout the analysis process.

#### Create additional variables

To enhance the dataset with additional information that could provide deeper insights into riding patterns, several new variables were created. Each variable is derived from existing data but is designed to facilitate more specific analyses:

```{r additional_var_table, warning=FALSE, message=FALSE, echo=FALSE, results='asis'}
additional_variables <- tribble(
  ~Variable, ~Description,
  "`ride_duration`", "Represents the duration of the ride in minutes. This is calculated from the difference between the start and end timestamps, providing a quantitative measure of ride length.",
  "`ride_month`", "Indicates the month in which the ride started. This variable can help analyze monthly usage patterns and seasonal variations in bike usage.",
  "`ride_week`", "Identifies the week number relative to the beginning of the dataset, allowing for analysis of weekly trends or changes over time.",
  "`ride_day_of_week`", "Specifies the day of the week the ride began. This categorical variable is useful for understanding daily usage patterns, such as distinguishing between weekday and weekend trends.",
  "`ride_start_hour`", "Captures the hour of the day the ride started, which can be crucial for identifying peak usage times during the day.",
  "`day_type`", "Categorizes each ride as either occurring on a 'Weekday' or 'Weekend.' This differentiation can help in analyzing differences in riding behavior between workdays and leisure days.",
  "`ride_distance`", "Measures the straight-line distance of the ride, calculated using the Haversine formula to determine the 'as the crow flies' distance between the start and end coordinates. This provides an estimate of the spatial extent of each ride."
)

# Display only the variables with missing data
additional_variables %>%
  kable(
    caption = "Additional variables",
    format = "html"
  ) %>%
  custom_table_theme()
```


The creation of these variables was performed using R's mutate function within the tidyverse, as follows:

```{r create_additional_variables, echo=TRUE, eval=FALSE}
data_processed <- data_processed %>%
  mutate(
    ride_duration = as.numeric(difftime(
      end_timestamp,
      start_timestamp,
      units = "mins"
    )),
    ride_month = as.Date(floor_date(start_timestamp, "month")),
    ride_week = floor_date(start_timestamp, "week"),
    ride_day_of_week = factor(wday(start_timestamp, label = TRUE)),
    ride_start_hour = factor(hour(start_timestamp)),
    day_type = factor(ifelse(
      ride_day_of_week %in% c("Sat", "Sun"),
      "Weekend",
      "Weekday"
    )),
    ride_distance = distHaversine(
      cbind(start_longitude, start_latitude),
      cbind(end_longitude, end_latitude)
    )
  )
```

These transformations enhance the dataset and prepare it for in-depth exploratory and predictive analyses, ensuring that the data is well-suited for comprehensive and advanced analytical tasks.

#### Remove outliers    

Removing outliers is crucial to maintaining the integrity of the data analysis. We focused on eliminating atypical values in ride duration and distance that could potentially distort the results.     

##### Ride duration

```{r anomalous_duration, echo=TRUE, eval=FALSE}
# Check for anomalous ride duration
min_duration <- 1
max_duration <- 180

# Count anomalous durations
anomalous_duration <- data_processed %>%
  count_anomalies(ride_duration, min_duration, max_duration)

# Remove rides with anomalous duration
data_processed <- data_processed %>%
  remove_anomalies(ride_duration, min_duration, max_duration)
```

For ride duration, we established thresholds based on realistic expectations and specific operational insights provided by the bike-share program. The minimum duration was set at 1 minute to account for "false starts" or instances where users might re-dock their bikes shortly after undocking to ensure the bike was securely locked. According to the dataset guidelines provided by the company, any trip recorded under 1 minute is likely not a genuine trip but rather an operational anomaly such as this.

The maximum allowable duration was set at 180 minutes (3 hours). This upper limit is designed to exclude rides that unusually extend beyond normal usage patterns, which might indicate situations where bikes were removed for maintenance but their operational status was not updated correctly in the system. Such errors can occur and lead to falsely prolonged ride times being recorded.

##### Ride distance     

For ride distance, outliers were addressed by setting statistical thresholds based on the distribution of the data. The maximum distance (max_distance) was calculated as three times the interquartile range (IQR) above the 75th percentile. This approach helps in identifying and removing extreme distances that are significantly higher than typical rides, which could be due to recording errors or unusual ride patterns.

The minimum distance threshold (min_distance) was set at the 1st percentile of positive distances to filter out rides that are improbably short, potentially indicative of errors like GPS discrepancies at the start or end of a ride.

```{r anomalous_distance, echo=TRUE, eval=FALSE}
ride_distance_stats <- data_processed %>%
  calculate_summary_stats(ride_distance)

# Calulate IQR
iqr_distance <- ride_distance_stats$q75 - ride_distance_stats$q25

# Calculate maximum threshold
max_distance <- ride_distance_stats$q75 + 3 * iqr_distance

# Calculate 99th percentile for the minimum threshold
min_distance <- data_processed %>%
  filter(ride_distance > 0) %>%
  summarise(min_dist = quantile(ride_distance, 0.01)) %>%
  pull()

# Count anomalous distances
anomalous_distance <- data_processed %>%
  count_anomalies(ride_distance, min_distance, max_distance)

# Remove rides with anomalous distance
data_processed <- data_processed %>%
  remove_anomalies(ride_distance, min_distance, max_distance)

obs_nonanomalous <- data_processed %>%
  nrow_lazy_dt()
```

By meticulously defining and applying these thresholds, we ensure that the dataset is free of extreme values, thereby enhancing the reliability and accuracy of the analyses derived from it.

## Data analysis     

The data analysis phase was designed to uncover actionable insights on how Cyclistic's annual members and casual riders utilize the bike-share system differently. Through a combination of statistical methods and graphical techniques, the analysis aimed to highlight distinct usage patterns and preferences between the two rider types. Here are the key steps and findings from this in-depth analysis:

### Exploratory data analysis

#### Force computation of the dataset    

The initial step in the data analysis involved converting the data from a `lazy_dt` format to a `tibble`. This step was necessary because `lazy_dt` in R defers computation, meaning it doesn't actually perform operations until explicitly instructed. This feature is useful for optimizing performance and managing memory usage during data manipulation, especially with large datasets. However, to proceed with detailed analysis and visualization, it was crucial to collect the data into a tibble, which realizes the dataset and makes it directly accessible for the subsequent analytical tasks.

```{r force_computation, echo=TRUE, eval=FALSE}
data_processed <- collect(data_processed)
```

This transformation ensures that all previous deferred operations are executed and the data is fully prepared for in-depth analysis and visualization processes.     

#### Examine monthly ridership

To assess the patterns of usage across different months and distinguish between Cyclistic's annual members and casual riders, we analyzed the monthly ridership data. This analysis was visualized to highlight the proportion of rides per month for each rider type, focusing on seasonal trends and their implications.


```{r monthly_ridership_plot, warning=FALSE, message=FALSE, echo=FALSE}
knitr::include_graphics(here("output", "plots", "monthly_ridership.png"))
```

Trend Analysis:
Throughout most of the warmer months, from April to October, there is a significant presence of casual riders (visualized in purple), suggesting a higher activity level or preference for the bike-share system among this group during favorable weather conditions. Casual riders often accounted for 32% to 40% of the total rides during these months.

Conversely, from November to February, there is a noticeable decline in the proportion of rides taken by casual riders, indicated by a shrinking purple section in the bars. This change highlights a substantial seasonal effect, with casual rider usage visibly reducing during the colder months.

Quantitative Observations:

Warmer Months: High activity among casual riders, comprising a significant portion of the ridership.
Colder Months: A marked decrease in casual rider activity, where their proportions notably diminish.

Implications:
The observed decrease in casual ridership during the colder months likely reflects the impact of less favorable weather conditions. Colder temperatures and inclement weather appear to deter occasional riders, who may prefer not to engage with the bike-share system under such conditions. This seasonal pattern underscores the need for targeted strategies to maintain or increase ridership during the off-peak season, potentially through marketing initiatives or incentives aimed at encouraging more consistent use among casual riders.

This analysis provides valuable insights into how different types of riders engage with the Cyclistic bike-share system across various seasons, aiding in strategic planning and decision-making to optimize service utilization year-round.

#### Examine daily ridership

To gain a deeper understanding of how Cyclistic's membership and casual riders utilize the service differently throughout the week, we conducted a comparative analysis of daily ridership patterns. We first calculated the day of the week with the highest average number of rides (the mode) for each rider type. 

```{r daily_ridership_table, warning=FALSE, message=FALSE, echo=FALSE}
# day_mode_table <- tribble(
#     ~" ", ~Mode,
#     "Annual members", day_mode_member,
#     "Casual riders", day_mode_casual
#   )

tribble(
  ~" ", ~Mode,
  "Annual members", day_mode_member,
  "Casual riders", day_mode_casual
) %>%
  kable(
    caption = "Day with the highest average number of rides",
    format = "html"
  ) %>%
  custom_table_theme()
```

With these calculations, we identified that the mode for member ridership is Thursday, and for casual riders, it is Saturday. This information guided us to visualize and compare the average daily ridership for members and casual riders throughout the week.     


```{r daily_ridership_plot, warning=FALSE, message=FALSE, echo=FALSE}
knitr::include_graphics(here("output", "plots", "daily_ridership.png"))
```

Comparative Analysis:

Member Ridership: Represented in teal, member usage remains robust throughout the week with slight variability but generally high levels, suggesting a stable pattern likely linked to commuting habits.
Casual Ridership: Illustrated in purple, casual ridership is significantly lower on weekdays but surges on weekends, particularly peaking on Saturday.
Quantitative Observations:

Members: Show the highest ridership on weekdays, especially mid-week, which aligns with regular commuting patterns.
Casual Riders: Peak on Saturdays with 6,612 rides, with also high activity on Sundays (5,242 rides) and Fridays (5,153 rides). Monday to Thursday sees comparatively lower activity, ranging from 3,847 to 4,564 rides.
Weekday vs. Weekend Analysis:
Distinct patterns emerge between the two groups:

Members: Likely utilize the service for consistent commuting throughout the week.
Casual Riders: Show a marked increase in usage over weekends, indicating a preference for recreational or non-commuting travel.
Implications for Service and Marketing:

Weekend Promotions: The spike in weekend ridership among casual riders presents an opportunity for weekend-specific promotions or events to further boost casual usage.
Weekday Reliability: Given the stable weekday demand from members, focusing on reliability and quick service during these times could enhance satisfaction, with potential avenues like loyalty programs or incentives for continued usage.

#### Examine hourly ridership

To analyze hourly usage patterns of Cyclistic's bike-share system, we created heatmaps for weekdays and weekends. These heatmaps help visualize the intensity of ridership across different hours of the day, using a color scheme that ranges from dark purple (fewer rides) to bright teal (more rides), facilitating an intuitive understanding of rider activity levels.     

```{r hourly_ridership_plot, warning=FALSE, message=FALSE, echo=FALSE}
knitr::include_graphics(here("output", "plots", "hourly_ridership_heatmap.png"))
```

Weekday Ridership Patterns (Top Heatmap):
The weekday heatmap reveals clear peaks during typical rush hours, represented in bright teal, indicating significant commuting activity. The pattern shows ridership starting at lower levels in the early morning (dark purple), escalating to a peak during rush hours, and tapering off towards the evening and late night.

Weekend Ridership Patterns (Bottom Heatmap):
In contrast, the weekend heatmap displays a more gradual increase in ridership that begins later in the morning and maintains a relatively high level throughout the day into the evening. This pattern, characterized by consistently lighter shades, suggests leisure or non-commuter behavior, with sustained activity from late morning to evening, without the sharp peaks and troughs observed on weekdays.

Comparative Analysis of Weekdays vs. Weekends:

Weekdays: The pronounced peaks during morning and evening rush hours underscore a commuter-driven usage pattern. This emphasizes the need for robust service to accommodate the surge in work-related travel.
Weekends: The more evenly distributed, sustained ridership levels indicate a more relaxed schedule, likely reflecting leisure activities. This suggests potential for promotional strategies to enhance leisure usage.
Implications for Service Planning:

Weekdays: Efficient and high-capacity service during rush hours should be a priority to manage the high volume of commuters effectively.
Weekends: Promotional activities like special weekend passes or discounts could be employed to attract more riders during these extended periods of moderate to high ridership, enhancing the appeal for leisure travel.
This heatmap analysis provides critical insights into the hourly dynamics of bike usage, aiding in strategic planning to optimize service offerings tailored to the distinct patterns observed during weekdays and weekends.
